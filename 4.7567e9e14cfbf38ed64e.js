(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"0NoW":function(t,e,n){"use strict";n.r(e),n.d(e,"GuestBookModule",(function(){return H}));var o=n("l7P3"),i=n("9jGm"),c=n("ofXK"),b=n("3Pt+"),a=n("tyNb"),l=n("o/yV"),s=n("cp0P"),r=n("G1cZ");const d=Object(o.o)(r.a),u=Object(o.q)(d,t=>t.entries),m=Object(o.q)(d,t=>t.loading);var g=n("fXoL"),f=n("0IaG"),p=n("kmnG"),h=n("qFsG"),O=n("ihCf");let v=(()=>{class t{constructor(t,e){this.fb=t,this.dialogRef=e}onSubmit(){this.form.valid&&this.dialogRef.close(this.form.getRawValue())}ngOnInit(){this.form=this.fb.group({userId:["",[b.l.required,b.l.maxLength(20),b.l.email]],id:"",title:"",body:["",b.l.required]})}}return t.\u0275fac=function(e){return new(e||t)(g.Lb(b.b),g.Lb(f.g))},t.\u0275cmp=g.Fb({type:t,selectors:[["app-guest-book-form"]],decls:23,vars:2,consts:[[1,"dialog-form"],[3,"formGroup"],["mat-dialog-title",""],[1,"full-width"],["type","name","matInput","","formControlName","userId","placeholder","olga.zoldaka@cv.lv"],["type","name","matInput","","formControlName","body","cdkTextareaAutosize","","placeholder","Type your message here"],["mat-dialog-close","",1,"btn","btn-secondary"],[1,"btn","btn-secondary",3,"disabled","click"]],template:function(t,e){1&t&&(g.Qb(0,"div",0),g.Qb(1,"form",1),g.Qb(2,"h1",2),g.vc(3,"Your feedback:"),g.Pb(),g.Qb(4,"mat-dialog-content"),g.Qb(5,"mat-form-field",3),g.Qb(6,"mat-label"),g.vc(7,"Email"),g.Pb(),g.Mb(8,"input",4),g.Qb(9,"mat-error"),g.vc(10," Please enter a valid email address "),g.Pb(),g.Pb(),g.Qb(11,"mat-form-field",3),g.Qb(12,"mat-label"),g.vc(13,"Message"),g.Pb(),g.Qb(14,"textarea",5),g.vc(15,"          "),g.Pb(),g.Qb(16,"mat-error"),g.vc(17," This field is required "),g.Pb(),g.Pb(),g.Pb(),g.Qb(18,"mat-dialog-actions"),g.Qb(19,"button",6),g.vc(20,"Cancel"),g.Pb(),g.Qb(21,"button",7),g.Xb("click",(function(){return e.form.valid&&e.onSubmit()})),g.vc(22,"Submit"),g.Pb(),g.Pb(),g.Pb(),g.Pb()),2&t&&(g.Ab(1),g.gc("formGroup",e.form),g.Ab(20),g.gc("disabled",!e.form.valid))},directives:[b.m,b.h,b.d,f.h,f.e,p.c,p.f,h.a,b.a,b.g,b.c,p.b,O.b,f.c,f.d],styles:[".dialog-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{height:100%;width:100%}"]}),t})();var P=n("/jMu");const j=Object(o.o)(P.a),Q=Object(o.q)(j,t=>t.model),y=Object(o.q)(j,t=>t.loading);var M=n("ave1"),A=n("Xa2L"),I=n("Qu3c");function k(t,e){1&t&&(g.Ob(0),g.Qb(1,"div",1),g.Mb(2,"mat-spinner",2),g.Pb(),g.Nb())}function w(t,e){if(1&t&&(g.Ob(0),g.Qb(1,"div",3),g.Qb(2,"h1",4),g.vc(3,"User Information"),g.Pb(),g.Qb(4,"div",5),g.Qb(5,"mat-form-field",6),g.Qb(6,"mat-label"),g.vc(7,"ID"),g.Pb(),g.Mb(8,"input",7),g.Pb(),g.Qb(9,"mat-form-field",6),g.Qb(10,"mat-label"),g.vc(11,"Username"),g.Pb(),g.Mb(12,"input",7),g.Pb(),g.Qb(13,"mat-form-field",6),g.Qb(14,"mat-label"),g.vc(15,"Name"),g.Pb(),g.Mb(16,"input",7),g.Pb(),g.Pb(),g.Qb(17,"div",5),g.Qb(18,"mat-form-field",6),g.Qb(19,"mat-label"),g.vc(20,"Phone"),g.Pb(),g.Mb(21,"input",7),g.Pb(),g.Qb(22,"mat-form-field",6),g.Qb(23,"mat-label"),g.vc(24,"Website"),g.Pb(),g.Mb(25,"input",7),g.Pb(),g.Qb(26,"mat-form-field",6),g.Qb(27,"mat-label"),g.vc(28,"Email"),g.Pb(),g.Mb(29,"input",7),g.Pb(),g.Pb(),g.Qb(30,"div",5),g.Qb(31,"mat-form-field",6),g.Qb(32,"mat-label"),g.vc(33,"Address"),g.Pb(),g.Mb(34,"input",8),g.Pb(),g.Qb(35,"mat-form-field",6),g.Qb(36,"mat-label"),g.vc(37,"Geo"),g.Pb(),g.Mb(38,"input",8),g.Pb(),g.Qb(39,"mat-form-field",6),g.Qb(40,"mat-label"),g.vc(41,"Company"),g.Pb(),g.Mb(42,"input",8),g.Pb(),g.Pb(),g.Pb(),g.Nb()),2&t){const t=e.ngIf;g.Ab(5),g.hc("matTooltip",null==t?null:t.id),g.Ab(3),g.gc("ngModel",null==t?null:t.id),g.Ab(1),g.hc("matTooltip",null==t?null:t.username),g.Ab(3),g.gc("ngModel",null==t?null:t.username),g.Ab(1),g.hc("matTooltip",null==t?null:t.name),g.Ab(3),g.gc("ngModel",null==t?null:t.name),g.Ab(2),g.hc("matTooltip",null==t?null:t.phone),g.Ab(3),g.gc("ngModel",null==t?null:t.phone),g.Ab(1),g.hc("matTooltip",null==t?null:t.website),g.Ab(3),g.gc("ngModel",null==t?null:t.website),g.Ab(1),g.hc("matTooltip",null==t?null:t.email),g.Ab(3),g.gc("ngModel",null==t?null:t.email),g.Ab(2),g.hc("matTooltip",null==t?null:t.address),g.Ab(3),g.gc("ngModel",null==t?null:t.address),g.Ab(1),g.hc("matTooltip",null==t?null:t.geo),g.Ab(3),g.gc("ngModel",null==t?null:t.geo),g.Ab(1),g.hc("matTooltip",null==t?null:t.company),g.Ab(3),g.gc("ngModel",null==t?null:t.company)}}function C(t,e){1&t&&(g.Ob(0),g.vc(1,"There is no data available"),g.Nb())}let x=(()=>{class t{constructor(t){this.store=t,this.userModel$=this.store.select(Q),this.userState$=this.store.select(j),this.loading$=this.store.select(y)}ngOnInit(){}ngOnDestroy(){this.store.dispatch(Object(M.a)())}}return t.\u0275fac=function(e){return new(e||t)(g.Lb(o.h))},t.\u0275cmp=g.Fb({type:t,selectors:[["app-user"]],decls:6,vars:9,consts:[[4,"ngIf"],[1,"uploader-status"],[2,"margin","0 auto"],[1,"user-info-dialog"],["mat-dialog-title",""],[1,"form-row"],["matTooltipPosition","below",3,"matTooltip"],["matInput","","disabled","",3,"ngModel"],["matInput","","disabled","","ng-list","",3,"ngModel"]],template:function(t,e){1&t&&(g.uc(0,k,3,0,"ng-container",0),g.cc(1,"async"),g.uc(2,w,43,18,"ng-container",0),g.cc(3,"async"),g.uc(4,C,2,0,"ng-container",0),g.cc(5,"async")),2&t&&(g.gc("ngIf",g.dc(1,3,e.loading$)),g.Ab(2),g.gc("ngIf",g.dc(3,5,e.userState$).model),g.Ab(2),g.gc("ngIf",null===g.dc(5,7,e.userModel$)&&!e.loading$))},directives:[c.k,A.b,f.h,p.c,I.a,p.f,h.a,b.a,b.g,b.j],pipes:[c.b],styles:[".user-info-dialog[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column}.form-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.form-row[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{padding-right:8px}.mat-form-field[_ngcontent-%COMP%]{width:33.3%}.mat-input-element[_ngcontent-%COMP%]{padding:0;margin:5px 0;overflow:hidden;text-overflow:ellipsis}.uploader-status[_ngcontent-%COMP%]     .mat-spinner circle{stroke:#789}"]}),t})();var $=n("Riqv"),T=n("bTqV");function B(t,e){1&t&&(g.Ob(0),g.Qb(1,"div",1),g.Mb(2,"mat-spinner",2),g.Pb(),g.Nb())}function _(t,e){if(1&t){const t=g.Rb();g.Qb(0,"div"),g.Qb(1,"h3",7),g.vc(2),g.Pb(),g.Qb(3,"p",8),g.vc(4,"By: "),g.Mb(5,"a",9),g.Qb(6,"button",10),g.Xb("click",(function(){g.mc(t);const n=e.$implicit;return g.bc(3).openUserInfo(n.userId)})),g.vc(7,"Click for details..."),g.Pb(),g.Pb(),g.Pb()}if(2&t){const t=e.$implicit;g.Ab(2),g.xc(" ",null==t?null:t.body," "),g.Ab(3),g.gc("textContent",t.userId)}}function S(t,e){if(1&t&&(g.Qb(0,"div"),g.uc(1,_,8,2,"div",6),g.Pb()),2&t){const t=e.ngIf;g.Ab(1),g.gc("ngForOf",t)}}function G(t,e){if(1&t){const t=g.Rb();g.Ob(0),g.Qb(1,"div",3),g.Qb(2,"button",4),g.Xb("click",(function(){return g.mc(t),g.bc().openEntryDialog()})),g.vc(3),g.Pb(),g.Pb(),g.Qb(4,"div",5),g.uc(5,S,2,1,"div",0),g.cc(6,"async"),g.Pb(),g.Nb()}if(2&t){const t=g.bc();g.Ab(2),g.gc("disabled",t.disableButton),g.Ab(1),g.xc(" ",t.disableButton?"...":"Add feedback"," "),g.Ab(2),g.gc("ngIf",g.dc(6,3,t.entries$))}}let q=(()=>{class t{constructor(t,e){this.store=t,this.dialogService=e,this.entries$=this.store.select(u),this.loading$=this.store.select(m)}ngOnInit(){this.disableButton=!1,this.store.dispatch(Object(l.d)())}openEntryDialog(){this.disableButton=!0,this.dialogService.openDialog(this.store,v,"auto","350px",!1,!1).subscribe(()=>Object(s.a)([this.store.dispatch(Object(l.d)()),this.disableButton=!this.disableButton]))}openUserInfo(t){this.store.dispatch(Object(M.b)({id:t})),this.user$=this.store.select(j),this.dialogService.openDialog(this.store,x,"850px","400px",!0,!0)}}return t.\u0275fac=function(e){return new(e||t)(g.Lb(o.h),g.Lb($.a))},t.\u0275cmp=g.Fb({type:t,selectors:[["app-guest-book"]],decls:6,vars:6,consts:[[4,"ngIf"],[1,"uploader-status"],[2,"margin","0 auto"],[2,"float","right"],[1,"btn","btn-secondary","pointer",3,"autofocus","disabled","click"],[1,"comments",2,"display","inline-flex"],[4,"ngFor","ngForOf"],[1,"comments-body"],[1,"comments-meta"],[3,"textContent"],["mat-button","",3,"click"]],template:function(t,e){1&t&&(g.Qb(0,"h2"),g.vc(1,"Guest Book"),g.Pb(),g.uc(2,B,3,0,"ng-container",0),g.cc(3,"async"),g.uc(4,G,7,5,"ng-container",0),g.cc(5,"async")),2&t&&(g.Ab(2),g.gc("ngIf",g.dc(3,2,e.loading$)),g.Ab(2),g.gc("ngIf",!g.dc(5,4,e.loading$)))},directives:[c.k,A.b,c.j,T.a],pipes:[c.b],styles:["h2[_ngcontent-%COMP%]{text-align:left;margin-bottom:15px;color:#789}.mat-spinner[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%], .uploader-status[_ngcontent-%COMP%]     .mat-progress-spinner circle{stroke:#789}"]}),t})();const L=Object(o.p)(r.b,Object(o.r)(l.d,t=>Object.assign(Object.assign({},t),{loading:!0})),Object(o.r)(l.f,(t,e)=>Object.assign(Object.assign({},t),{entries:e.entries,error:"",loading:!1})),Object(o.r)(l.e,(t,e)=>Object.assign(Object.assign({},t),{entries:[],error:e.error,loading:!1})),Object(o.r)(l.a),Object(o.r)(l.c,(t,e)=>Object.assign(Object.assign({},t),{entries:[Object.assign({},e.entry),...t.entries],error:""})),Object(o.r)(l.b,(t,e)=>Object.assign(Object.assign({},t),{entries:t.entries,error:e.error})));function N(t,e){return L(t,e)}var F=n("eIep"),R=n("lJxs"),U=n("JIr8"),D=n("bOdf"),E=n("LRne"),X=n("6DSB");let J=(()=>{class t{constructor(t,e,n){this.actions$=t,this.store=e,this.guestBookService=n,this.entriesLoad$=Object(i.c)(()=>this.actions$.pipe(Object(i.d)(l.d),Object(F.a)(()=>this.guestBookService.getGuestBookEntries().pipe(Object(R.a)(t=>Object(l.f)({entries:t})),Object(U.a)(t=>Object(E.a)(Object(l.e)({error:t}))))))),this.addEntry$=Object(i.c)(()=>this.actions$.pipe(Object(i.d)(l.a),Object(D.a)(t=>this.guestBookService.AddEntry(t.entry).pipe(Object(R.a)(t=>Object(l.c)({entry:t})),Object(U.a)(t=>Object(E.a)(Object(l.b)({error:t})))))))}}return t.\u0275fac=function(e){return new(e||t)(g.Ub(i.a),g.Ub(o.h),g.Ub(X.a))},t.\u0275prov=g.Hb({token:t,factory:t.\u0275fac}),t})();var V=n("M9IT"),z=n("7UCR");const W=[{path:"",component:q}];let H=(()=>{class t{}return t.\u0275mod=g.Jb({type:t}),t.\u0275inj=g.Ib({factory:function(e){return new(e||t)},providers:[X.a],imports:[[a.h.forChild(W),o.j.forFeature(r.a,N),i.b.forFeature([J]),c.c,b.k,a.h,b.e,V.a,z.a,f.f,T.b,p.e,h.b,A.a]]}),t})()}}]);